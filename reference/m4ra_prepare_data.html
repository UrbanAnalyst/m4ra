<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='This is a meta-function that calls the following functions:
m4ra_weight_networks to generate several versions of the input
street network weighted for different kinds of transport.
m4ra_gtfs_traveltimes to generate
It also identifies the closest GTFS stops to every network point. The
function stores several differently-weighted version of the street networks
in a local cache directory defined by the user_cache_dir() function of the
rappdirs package, or by a local environment parameter,
"M4RA_CACHE_DIR", if set.'><title>Prepare network and GTFS components for 'm4ra' queries. — m4ra_prepare_data • m4ra</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare network and GTFS components for 'm4ra' queries. — m4ra_prepare_data"><meta property="og:description" content='This is a meta-function that calls the following functions:
m4ra_weight_networks to generate several versions of the input
street network weighted for different kinds of transport.
m4ra_gtfs_traveltimes to generate
It also identifies the closest GTFS stops to every network point. The
function stores several differently-weighted version of the street networks
in a local cache directory defined by the user_cache_dir() function of the
rappdirs package, or by a local environment parameter,
"M4RA_CACHE_DIR", if set.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">m4ra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.017</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ATFutures/m4ra">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Prepare network and GTFS components for 'm4ra' queries.</h1>
      <small class="dont-index">Source: <a href="https://github.com/ATFutures/m4ra/blob/HEAD/R/prepare-data.R" class="external-link"><code>R/prepare-data.R</code></a></small>
      <div class="d-none name"><code>m4ra_prepare_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a meta-function that calls the following functions:</p><ul><li><p><a href="m4ra_weight_networks.html">m4ra_weight_networks</a> to generate several versions of the input
street network weighted for different kinds of transport.</p></li>
<li><p><a href="m4ra_gtfs_traveltimes.html">m4ra_gtfs_traveltimes</a> to generate</p></li>
</ul><p>It also identifies the closest GTFS stops to every network point. The
function stores several differently-weighted version of the street networks
in a local cache directory defined by the <code>user_cache_dir()</code> function of the
<span class="pkg">rappdirs</span> package, or by a local environment parameter,
"M4RA_CACHE_DIR", if set.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">m4ra_prepare_data</span><span class="op">(</span></span>
<span>  net_sc <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gtfs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  city_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  planet_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  day <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_time_limits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  final_mode <span class="op">=</span> <span class="st">"foot"</span>,</span>
<span>  fast <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_closest <span class="op">=</span> <span class="fl">10L</span>,</span>
<span>  batch_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parking <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>net_sc</dt>
<dd><p>Local file path to a <span class="pkg">silicate</span>, "SC", format object
containing network data used to generate weighted street networks.</p></dd>


<dt>gtfs</dt>
<dd><p>Local file path to a <span class="pkg">gtfsrouter</span> object saved via <code>saveRDS</code>,
containing GTFS (General Transit Feed Specification) data for network
represented in <code>net_sc</code>. This <code>.Rds</code> object may include additional timetable
or transfer information in addition to data represented in original
<code>zip</code>-format data of provided GTFS feed.</p></dd>


<dt>city_name</dt>
<dd><p>Name of city used to name cached files.</p></dd>


<dt>planet_file</dt>
<dd><p>Optional file path to local <code>.osm.pbf</code> or <code>.osm.bz2</code> file
encompassing specified bounding box. If given, data are extracted with
system-level calls to "osmium", which must be installed.</p></dd>


<dt>day</dt>
<dd><p>As for the 'gtfs_traveltimes' function of <span class="pkg">gtfsrouter</span>, the
day for which the matrix is to be calculated.</p></dd>


<dt>start_time_limits</dt>
<dd><p>As for the 'gtfs_traveltimes' function of
<span class="pkg">gtfsrouter</span>, a vector of two values specifying the earliest and latest
departure times from each station.</p></dd>


<dt>final_mode</dt>
<dd><p>The mode of transport used for the final stage from GTFS
stops to destination points.</p></dd>


<dt>fast</dt>
<dd><p>Values of <code>TRUE</code> generate potentially enormous matrices which may
not fit in local memory. The default value of <code>FALSE</code> is generally safer, but
calculation may take considerably longer.</p></dd>


<dt>n_closest</dt>
<dd><p>Final travel times to each destination point are calculated
by tracing back times to this number of closest GTFS stops. Lower values will
result in faster calculation times, yet with potentially inaccurate results.</p></dd>


<dt>batch_size</dt>
<dd><p>Default routine calculates full travel time matrices
between all pairs of stops. For very large GTFS feeds, this matrix may not
fit into memory, in which case this parameter can be set to a positive
integer value to sequentially calculate only portions of the full matrix,
before final re-assembly into single result.</p></dd>


<dt>parking</dt>
<dd><p>If <code>TRUE</code>, calculate local densities of parking availability
and building volumes, and convert to a score used to calculate time penalties
for automobile routing.</p></dd>


<dt>quiet</dt>
<dd><p>If <code>FALSE</code>, display progress information on screen.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other prep: 
<code><a href="m4ra_parking.html">m4ra_parking</a>()</code>,
<code><a href="m4ra_times_to_gtfs_stops.html">m4ra_times_to_gtfs_stops</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mark Padgham.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

